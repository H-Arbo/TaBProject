{"version":3,"file":"detectFiberTags.js","names":["_react","_interopRequireDefault","require","_reactDom","_enzymeAdapterUtils","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","prototype","t","_toPrimitive","_typeof","String","r","e","Symbol","toPrimitive","call","Number","_callSuper","o","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","self","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","getFiber","element","container","global","document","createElement","inst","Tester","_React$Component","arguments","render","React","Component","ReactDOM","_reactInternalFiber","child","getLazyFiber","LazyComponent","_React$Component2","SuspenseWrapper","_React$Component3","Suspense","fallback","detectFiberTags","supportsMode","StrictMode","supportsContext","createContext","supportsForwardRef","forwardRef","supportsMemo","memo","supportsProfiler","unstable_Profiler","Profiler","supportsSuspense","supportsLazy","lazy","Fn","Cls","_React$Component4","Ctx","FwdRef","ref","fakeDynamicImport","HostRoot","tag","ClassComponent","Fragment","FunctionalComponent","MemoSFC","MemoClass","HostPortal","createPortal","HostComponent","HostText","Mode","ContextConsumer","Consumer","ContextProvider","Provider","ForwardRef","id","onRender","Lazy","module","exports","default"],"sources":["../src/detectFiberTags.js"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { fakeDynamicImport } from 'enzyme-adapter-utils';\n\nfunction getFiber(element) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return element;\n    }\n  }\n  ReactDOM.render(React.createElement(Tester), container);\n  return inst._reactInternalFiber.child;\n}\n\nfunction getLazyFiber(LazyComponent) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  // eslint-disable-next-line react/prefer-stateless-function\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return React.createElement(LazyComponent);\n    }\n  }\n  // eslint-disable-next-line react/prefer-stateless-function\n  class SuspenseWrapper extends React.Component {\n    render() {\n      return React.createElement(\n        React.Suspense,\n        { fallback: false },\n        React.createElement(Tester),\n      );\n    }\n  }\n  ReactDOM.render(React.createElement(SuspenseWrapper), container);\n  return inst._reactInternalFiber.child;\n}\n\nexport default function detectFiberTags() {\n  const supportsMode = typeof React.StrictMode !== 'undefined';\n  const supportsContext = typeof React.createContext !== 'undefined';\n  const supportsForwardRef = typeof React.forwardRef !== 'undefined';\n  const supportsMemo = typeof React.memo !== 'undefined';\n  const supportsProfiler = typeof React.unstable_Profiler !== 'undefined' || typeof React.Profiler !== 'undefined';\n  const supportsSuspense = typeof React.Suspense !== 'undefined';\n  const supportsLazy = typeof React.lazy !== 'undefined';\n\n  function Fn() {\n    return null;\n  }\n  // eslint-disable-next-line react/prefer-stateless-function\n  class Cls extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  let Ctx = null;\n  let FwdRef = null;\n  let LazyComponent = null;\n  if (supportsContext) {\n    Ctx = React.createContext();\n  }\n  if (supportsForwardRef) {\n    // React will warn if we don't have both arguments.\n    // eslint-disable-next-line no-unused-vars\n    FwdRef = React.forwardRef((props, ref) => null);\n  }\n  if (supportsLazy) {\n    LazyComponent = React.lazy(() => fakeDynamicImport(() => null));\n  }\n\n  return {\n    HostRoot: getFiber('test').return.return.tag, // Go two levels above to find the root\n    ClassComponent: getFiber(React.createElement(Cls)).tag,\n    Fragment: getFiber([['nested']]).tag,\n    FunctionalComponent: getFiber(React.createElement(Fn)).tag,\n    MemoSFC: supportsMemo\n      ? getFiber(React.createElement(React.memo(Fn))).tag\n      : -1,\n    MemoClass: supportsMemo\n      ? getFiber(React.createElement(React.memo(Cls))).tag\n      : -1,\n    HostPortal: getFiber(ReactDOM.createPortal(null, global.document.createElement('div'))).tag,\n    HostComponent: getFiber(React.createElement('span')).tag,\n    HostText: getFiber('text').tag,\n    Mode: supportsMode\n      ? getFiber(React.createElement(React.StrictMode)).tag\n      : -1,\n    ContextConsumer: supportsContext\n      ? getFiber(React.createElement(Ctx.Consumer, null, () => null)).tag\n      : -1,\n    ContextProvider: supportsContext\n      ? getFiber(React.createElement(Ctx.Provider, { value: null }, null)).tag\n      : -1,\n    ForwardRef: supportsForwardRef\n      ? getFiber(React.createElement(FwdRef)).tag\n      : -1,\n    Profiler: supportsProfiler\n      ? getFiber(React.createElement((React.Profiler || React.unstable_Profiler), { id: 'mock', onRender() {} })).tag\n      : -1,\n    Suspense: supportsSuspense\n      ? getFiber(React.createElement(React.Suspense, { fallback: false })).tag\n      : -1,\n    Lazy: supportsLazy\n      ? getLazyFiber(LazyComponent).tag\n      : -1,\n  };\n}\n"],"mappings":"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"}